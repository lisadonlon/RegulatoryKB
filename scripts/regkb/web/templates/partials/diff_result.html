<article>
    <header>Comparison: {{ result.doc1_title }} vs {{ result.doc2_title }}</header>

    <div class="diff-stats-grid">
        <div class="diff-stat">
            <strong>{{ "%.1f" | format(stats.similarity * 100) }}%</strong>
            <small>Similarity</small>
        </div>
        <div class="diff-stat diff-stat-added">
            <strong>{{ stats.added }}</strong>
            <small>Added</small>
        </div>
        <div class="diff-stat diff-stat-removed">
            <strong>{{ stats.removed }}</strong>
            <small>Removed</small>
        </div>
        <div class="diff-stat diff-stat-changed">
            <strong>{{ stats.changed }}</strong>
            <small>Changed</small>
        </div>
        <div class="diff-stat">
            <strong>{{ stats.unchanged }}</strong>
            <small>Unchanged</small>
        </div>
    </div>

    <div class="export-buttons">
        <small>Export:</small>
        <a href="/diff/export?doc1={{ result.doc1_id }}&doc2={{ result.doc2_id }}&format=csv" role="button" class="outline small">CSV</a>
        <a href="/diff/export?doc1={{ result.doc1_id }}&doc2={{ result.doc2_id }}&format=md" role="button" class="outline small">Markdown</a>
        <a href="/diff/export?doc1={{ result.doc1_id }}&doc2={{ result.doc2_id }}&format=html" role="button" class="outline small">HTML Report</a>
    </div>

    {% if stats.similarity == 1.0 %}
    <p>Documents are identical.</p>
    {% else %}
    <details open>
        <summary>Side-by-side diff</summary>
        <iframe class="diff-iframe" srcdoc="{{ result.html_diff | e }}" sandbox></iframe>
    </details>
    {% endif %}
</article>
